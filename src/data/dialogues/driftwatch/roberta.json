{
  "roberta_default": {
    "nodes": {
      "0": {
        "npc_text": "Tide & Trade, finest goods in Port Kael. What can I get you?",
        "player_choices": [
          {
            "text": "What's for sale?",
            "action": "open_shop:tide_and_trade"
          },
          {
            "text": "What happened to the wall?",
            "next_node": "rb_wall",
            "condition": "quest.roberta_planks_for_the_past.active==false && quest.roberta_planks_for_the_past.completed==false"
          },
          {
            "text": "How is the wall repair going?",
            "next_node": "rb_help_gate",
            "condition": "quest.roberta_planks_for_the_past.active==true"
          },
          {
            "text": "I have the planks you needed.",
            "action": "complete_quest:roberta_planks_for_the_past",
            "next_node": "0",
            "condition": "quest.roberta_planks_for_the_past.active==true && inventory.wood_plank>=5"
          },
          {
            "text": "Tell me about Tide & Trade.",
            "next_node": "rb_lore_tide_trade1",
            "condition": "world_flags.roberta_lore_seen==false"
          },
          {
            "text": "Goodbye, Roberta.",
            "closes_dialogue": true
          }
        ]
      },
      "rb_wall": {
        "npc_text": "The storm took a chunk out of the east storehouse. I need planks to patch it before the next high tide.",
        "player_choices": [
          {
            "text": "I can help with that.",
            "next_node": "rb_help_gate",
            "condition": "relationship.npc_roberta>=20"
          },
          {
            "text": "I can help with that.",
            "next_node": "rb_trust_refusal",
            "condition": "relationship.npc_roberta<20"
          },
          {
            "text": "Sorry to hear that. (Back)",
            "next_node": "0"
          }
        ]
      },
      "rb_trust_refusal": {
        "npc_text": "I appreciate the offer, but I don't know you well enough to trust you with my shop's repairs yet. Maybe stick around, trade a bit, and we'll see.",
        "player_choices": [
          {
            "text": "Understood. (Back)",
            "next_node": "0"
          }
        ]
      },
      "rb_help_gate": {
        "npc_text": "I'll pay you for the trouble. I need 5 Wood Planks. You can find them at the lumberyard or scavenging the shore.",
        "player_choices": [
          {
            "text": "I'll find them.",
            "action": "start_quest:roberta_planks_for_the_past",
            "next_node": "0",
            "condition": "quest.roberta_planks_for_the_past.active==false"
          },
          {
            "text": "I'm still looking.",
            "next_node": "0",
            "condition": "quest.roberta_planks_for_the_past.active==true"
          }
        ]
      },
      "rb_lore_tide_trade1": {
        "npc_text": "Tide & Trade is one of Driftwatch’s oldest shops. It’s stood through lean years and storms.",
        "player_choices": [
          {
            "text": "And your family?",
            "next_node": "rb_lore_tide_trade2"
          }
        ]
      },
      "rb_lore_tide_trade2": {
        "npc_text": "My father ran it for decades. He passed recently… I'm still learning to handle everything.",
        "player_choices": [
          {
            "text": "Back to counter",
            "next_node": "0",
            "action": "set_flag:roberta_lore_seen:true"
          }
        ]
      },
      "rb_lore_family": {
        "npc_text": "It's just me now. The shop is all I have left of them.",
        "player_choices": [
          {
            "text": "Back to counter",
            "next_node": "0"
          }
        ]
      }
    }
  },
  "roberta_planks_active": {
    "nodes": {
      "0": {
        "npc_text": "Any progress on the planks?",
        "player_choices": [
          {
            "text": "How do I get planks again?",
            "next_node": "1"
          },
          {
            "text": "I brought the planks.",
            "next_node": "reward",
            "action": "advance_quest_stage:roberta_planks_for_the_past",
            "condition": "quest.roberta_planks_for_the_past.stage==3"
          },
          {
            "text": "What's for sale?",
            "action": "open_shop:tide_and_trade"
          },
          {
            "text": "I'll come back later.",
            "closes_dialogue": true
          }
        ]
      },
      "1": {
        "npc_text": "Cut logs in the woods, then use the sawmill to make planks. I'll brace the wall once you have them.",
        "player_choices": [
          {
            "text": "Back to counter",
            "next_node": "0"
          }
        ]
      },
      "reward": {
        "npc_text": "Thank you. This will hold. Here's your payment.",
        "player_choices": [
          {
            "text": "Back to counter",
            "next_node": "0",
            "action": "complete_quest:roberta_planks_for_the_past"
          }
        ]
      }
    }
  },
  "roberta_planks_completed": {
    "nodes": {
      "0": {
        "npc_text": "The patch held through the last squall. I couldn’t have done it without you.",
        "player_choices": [
          {
            "text": "What's for sale?",
            "action": "open_shop:tide_and_trade"
          },
          {
            "text": "Tell me about Tide & Trade.",
            "next_node": "tide_trade_lore",
            "condition": "world_flags.roberta_lore_seen==false"
          },
          {
            "text": "I'll come back later.",
            "closes_dialogue": true
          }
        ]
      },
      "tide_trade_lore": {
        "npc_text": "Tide & Trade is one of Driftwatch’s oldest shops. It’s stood through lean years and storms.",
        "player_choices": [
          {
            "text": "And your family?",
            "next_node": "tide_trade_lore2"
          }
        ]
      },
      "tide_trade_lore2": {
        "npc_text": "My father ran it for decades. He passed recently… I'm still learning to handle everything.",
        "player_choices": [
          {
            "text": "Back to counter",
            "next_node": "0",
            "action": "set_flag:roberta_lore_seen:true"
          }
        ]
      }
    }
  }
}